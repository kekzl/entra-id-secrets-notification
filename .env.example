# Entra ID Secrets Notification System - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================
# Azure/Entra ID Configuration (REQUIRED)
# ============================================
# Create an App Registration in Entra ID with the following API permissions:
# - Microsoft Graph > Application.Read.All (Application permission)
# Grant admin consent for the permissions

AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here

# ============================================
# Notification Thresholds (days)
# ============================================
# Secrets expiring within these days will be included in notifications
CRITICAL_THRESHOLD_DAYS=7
WARNING_THRESHOLD_DAYS=30
INFO_THRESHOLD_DAYS=90

# ============================================
# Run Configuration
# ============================================
# Run mode: 'once' (single execution) or 'scheduled' (continuous with cron)
RUN_MODE=scheduled

# Cron schedule for scheduled mode (default: daily at 8 AM UTC)
# Format: minute hour day-of-month month day-of-week
CRON_SCHEDULE=0 8 * * *

# Logging level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Dry run mode: set to 'true' to test without sending actual notifications
DRY_RUN=false

# ============================================
# Email Notification (SMTP)
# ============================================
SMTP_ENABLED=false
SMTP_SERVER=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@example.com
# Comma-separated list of recipients
SMTP_TO=admin@example.com,security@example.com
SMTP_USE_TLS=true

# ============================================
# Microsoft Teams Notification
# ============================================
# Create an Incoming Webhook connector in your Teams channel
TEAMS_ENABLED=false
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/...

# ============================================
# Slack Notification
# ============================================
# Create an Incoming Webhook in your Slack workspace
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

# ============================================
# Generic Webhook Notification
# ============================================
# Send JSON payload to any HTTP endpoint
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com/notify

# ============================================
# Microsoft Graph Email Notification
# ============================================
# Send email via Microsoft Graph API (requires Mail.Send permission)
# If tenant/client credentials are not set, uses the main Azure credentials above
GRAPH_EMAIL_ENABLED=false
GRAPH_EMAIL_TENANT_ID=
GRAPH_EMAIL_CLIENT_ID=
GRAPH_EMAIL_CLIENT_SECRET=
# Sender mailbox (app needs Mail.Send permission for this user/shared mailbox)
GRAPH_EMAIL_FROM=notifications@yourdomain.com
# Comma-separated list of recipients
GRAPH_EMAIL_TO=admin@example.com,security@example.com
# Save sent emails to Sent Items folder
GRAPH_EMAIL_SAVE_TO_SENT=false

# ============================================
# API Server (Optional)
# ============================================
# Enable REST API for health checks, reports, and on-demand checks
# Note: API does NOT expose credential details for security
API_ENABLED=false
API_HOST=0.0.0.0
API_PORT=8080
